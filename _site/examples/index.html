<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>examples - esd</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>examples | esd</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="examples" /> <meta name="author" content="No One" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="ESD …" /> <meta property="og:description" content="ESD …" /> <link rel="canonical" href="http://localhost:4000/examples/" /> <meta property="og:url" content="http://localhost:4000/examples/" /> <meta property="og:site_name" content="esd" /> <script type="application/ld+json"> {"@type":"WebPage","url":"http://localhost:4000/examples/","headline":"examples","author":{"@type":"Person","name":"No One"},"description":"ESD …","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> esd </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Welcome</a></li><li class="nav-list-item"><a href="http://localhost:4000/about/" class="nav-list-link">Empirical-Statistical Downscaling</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/functions/" class="nav-list-link">Functionalities</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/_pages/retrieve/" class="nav-list-link">Retrieve</a></li></ul></li><li class="nav-list-item active"><a href="http://localhost:4000/examples/" class="nav-list-link active">examples</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search esd" aria-label="Search esd" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/metno/esd" class="site-button" > esd on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="examples"> <a href="#examples" class="anchor-heading" aria-labelledby="examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Examples </h1> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#example-21-on-how-to-select-weather-stations-and-retrieve-recorded-values" id="markdown-toc-example-21-on-how-to-select-weather-stations-and-retrieve-recorded-values">Example 2.1 on how to select weather stations and retrieve recorded values</a></li> <li><a href="#example-22-on-the-different-esd-objects-and-clasees" id="markdown-toc-example-22-on-the-different-esd-objects-and-clasees">Example 2.2 on the different esd objects and clasees</a></li> <li><a href="#example-24-on-how-to-load-some-data-sets-and-display-the-summary-of-statistics" id="markdown-toc-example-24-on-how-to-load-some-data-sets-and-display-the-summary-of-statistics">Example 2.4 on how to load some data sets and display the summary of statistics</a></li> <li><a href="#example-25-on-how-to-load-a-weather-station-object-and-display-the-location-on-a-map" id="markdown-toc-example-25-on-how-to-load-a-weather-station-object-and-display-the-location-on-a-map">Example 2.5 on how to load a weather station object and display the location on a map</a></li> <li><a href="#example-26-on-how-to-read-a-field-object-and-plot-the-results" id="markdown-toc-example-26-on-how-to-read-a-field-object-and-plot-the-results">Example 2.6 on how to read a field object and plot the results</a></li> <li><a href="#example-27-on-how-to-retrieve-wind-data-sets-and-visualise-the-results" id="markdown-toc-example-27-on-how-to-retrieve-wind-data-sets-and-visualise-the-results">Example 2.7 on how to retrieve wind data sets and visualise the results</a></li> <li><a href="#example-28-test" id="markdown-toc-example-28-test">Example 2.8. test</a></li> <li><a href="#example-29-on-how-to-process-the-data-and-visualise-the-trend-of-the-time-series" id="markdown-toc-example-29-on-how-to-process-the-data-and-visualise-the-trend-of-the-time-series">Example 2.9 on how to process the data and visualise the trend of the time series</a></li> </ol> </details> <h2 id="example-21-on-how-to-select-weather-stations-and-retrieve-recorded-values"> <a href="#example-21-on-how-to-select-weather-stations-and-retrieve-recorded-values" class="anchor-heading" aria-labelledby="example-21-on-how-to-select-weather-stations-and-retrieve-recorded-values"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2.1 on how to select weather stations and retrieve recorded values </h2> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select a station across India recording daily maximum temperature</span><span class="w">
</span><span class="c1"># from the global historical climate network-daily</span><span class="w">
</span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">select.station</span><span class="p">(</span><span class="n">cntr</span><span class="o">=</span><span class="err">’</span><span class="n">India</span><span class="err">’</span><span class="p">,</span><span class="n">param</span><span class="o">=</span><span class="err">’</span><span class="n">tmax</span><span class="err">’</span><span class="p">,</span><span class="n">src</span><span class="o">=</span><span class="err">’</span><span class="n">ghcnd</span><span class="err">’</span><span class="p">)</span><span class="w">
</span><span class="n">ss.new</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span><span class="n">subset</span><span class="o">=!</span><span class="n">duplicated</span><span class="p">(</span><span class="n">ss</span><span class="o">$</span><span class="n">location</span><span class="p">))</span><span class="w">
</span><span class="n">map</span><span class="p">(</span><span class="n">ss.new</span><span class="p">,</span><span class="n">cex</span><span class="o">=</span><span class="m">1.2</span><span class="p">,</span><span class="n">col</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span><span class="n">bg</span><span class="o">=</span><span class="s2">"pink"</span><span class="p">,</span><span class="n">add.text</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">ss</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">select.station</span><span class="p">(</span><span class="n">stid</span><span class="o">=</span><span class="err">’</span><span class="n">IN022021900</span><span class="err">’</span><span class="p">,</span><span class="n">cntr</span><span class="o">=</span><span class="err">’</span><span class="n">india</span><span class="err">’</span><span class="p">,</span><span class="n">param</span><span class="o">=</span><span class="err">’</span><span class="n">tmax</span><span class="err">’</span><span class="p">)</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">station</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt;[1] "Retrieving data ..."</span><span class="w">
</span><span class="c1">#&gt;[1] "1 TMAX IN022021900 NEW DELHI/S INDIA GHCND"</span><span class="w">
</span><span class="c1"># Display the name of the location</span><span class="w">
</span><span class="n">loc</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w">
</span><span class="c1"># Highlights the location on the map</span><span class="w">
</span><span class="n">points</span><span class="p">(</span><span class="n">lon</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="n">lat</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="n">pch</span><span class="o">=</span><span class="m">19</span><span class="p">,</span><span class="n">col</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">,</span><span class="n">cex</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="c1"># aggregate daily values to annual values</span><span class="w">
</span><span class="n">ya</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">annual</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">FUN</span><span class="o">=</span><span class="err">’</span><span class="n">mean</span><span class="err">’</span><span class="p">,</span><span class="n">nmin</span><span class="o">=</span><span class="m">100</span><span class="p">)</span><span class="w">
</span><span class="c1"># Subset for the period 1970 to 2012</span><span class="w">
</span><span class="n">ya</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">ya</span><span class="p">,</span><span class="n">it</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span><span class="m">2012</span><span class="p">))</span><span class="w">
</span><span class="c1"># plot the time series including the error bar</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">ya</span><span class="p">,</span><span class="n">ylim</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">29.5</span><span class="p">,</span><span class="m">32.5</span><span class="p">))</span><span class="w">
</span><span class="c1"># Add the linear trend as</span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">trend</span><span class="p">(</span><span class="n">ya</span><span class="p">),</span><span class="n">col</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span><span class="n">lwd</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>Figure 3: Map showing available stations across India from the GHCN-D dataset and b) a plot of the annual maximum temperature recorded at New Delhi weather station (blue point) including linear trend line.</p> <h2 id="example-22-on-the-different-esd-objects-and-clasees"> <a href="#example-22-on-the-different-esd-objects-and-clasees" class="anchor-heading" aria-labelledby="example-22-on-the-different-esd-objects-and-clasees"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2.2 on the different esd objects and clasees </h2> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Example of monthly station data:</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">(</span><span class="n">Oslo</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">Oslo</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"station"</span><span class="w"> </span><span class="s2">"month"</span><span class="w">
</span><span class="s2">"zoo"</span><span class="w">
</span><span class="c1"># Example of daily station data:</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">(</span><span class="n">ferder</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">ferder</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"station"</span><span class="w"> </span><span class="s2">"day"</span><span class="w">
</span><span class="s2">"zoo"</span><span class="w">
</span><span class="c1"># Example of annual station data:</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">annual</span><span class="p">(</span><span class="n">ferder</span><span class="p">))</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"station"</span><span class="w"> </span><span class="s2">"annual"</span><span class="w">
</span><span class="s2">"zoo"</span><span class="w">
</span><span class="c1"># Example of a field object</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">t2m</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">t2m.NCEP</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">-30</span><span class="p">,</span><span class="m">30</span><span class="p">),</span><span class="n">lat</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">40</span><span class="p">,</span><span class="m">70</span><span class="p">))</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">t2m</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"field"</span><span class="w"> </span><span class="s2">"month"</span><span class="w"> </span><span class="s2">"zoo"</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">EOF</span><span class="p">(</span><span class="n">t2m</span><span class="p">))</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"eof"</span><span class="w">
</span><span class="s2">"field"</span><span class="w"> </span><span class="s2">"month"</span><span class="w"> </span><span class="s2">"zoo"</span><span class="w">
</span><span class="n">Example</span><span class="w"> </span><span class="m">2.3</span><span class="n">.</span><span class="w"> </span><span class="c1"># Load the data for Ferder weather station</span><span class="w">
</span><span class="n">data</span><span class="p">(</span><span class="n">ferder</span><span class="p">)</span><span class="w">
</span><span class="c1"># Display the structure of the data as</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">str</span><span class="p">(</span><span class="n">ferder</span><span class="p">)</span><span class="w">
</span><span class="err">’</span><span class="n">zoo</span><span class="err">’</span><span class="w"> </span><span class="n">series</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="m">1900-01-01</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="m">2013-12-04</span><span class="w">
</span><span class="n">Data</span><span class="o">:</span><span class="w"> </span><span class="n">atomic</span><span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">41611</span><span class="p">]</span><span class="w"> </span><span class="m">2.1</span><span class="w"> </span><span class="m">-1.8</span><span class="w"> </span><span class="m">-0.9</span><span class="w"> </span><span class="m">-3</span><span class="w"> </span><span class="m">-7.2</span><span class="w"> </span><span class="m">-6.5</span><span class="w"> </span><span class="m">-2.6</span><span class="w"> </span><span class="m">-2.4</span><span class="w"> </span><span class="m">-1.6</span><span class="w"> </span><span class="m">-0.3</span><span class="w"> </span><span class="n">...</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"location"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"Ferder lighthouse"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"station_id"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="m">27500</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"wmo_id"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="m">1482</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"longitude"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="m">10.5</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"latitude"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="m">59</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"altitude"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="m">6</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"variable"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"t2m"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"unit"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"deg C"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"country"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"Norway"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"source"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"MET Norway eklima"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"long name"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"daily mean temperature"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"URL"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"http://eKlima.met.no"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"calendar"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"gregorian"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"quality"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">logi</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"aspect"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"original"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"observation"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"MET Norway climate archive"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"info"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">logi</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"method"</span><span class="p">)</span><span class="o">=</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"mean estimated from thermometer measurements"</span><span class="w">
</span><span class="o">-</span><span class="w"> </span><span class="nf">attr</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s2">"history"</span><span class="p">)</span><span class="o">=</span><span class="n">List</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="n">..</span><span class="o">$</span><span class="w"> </span><span class="n">call</span><span class="w">
</span><span class="o">:</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"1 0"</span><span class="w">
</span><span class="n">..</span><span class="o">$</span><span class="w"> </span><span class="n">timestamp</span><span class="w">
</span><span class="o">:</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"Fri Dec 13 15:51:49 2013"</span><span class="w">
</span><span class="n">..</span><span class="o">$</span><span class="w"> </span><span class="n">sessioninfo</span><span class="o">:</span><span class="n">List</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="n">..</span><span class="w"> </span><span class="n">..</span><span class="o">$</span><span class="w"> </span><span class="n">R.version</span><span class="w">
</span><span class="o">:</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"R version 3.0.2 (2013-09-25)"</span><span class="w">
</span><span class="n">..</span><span class="w"> </span><span class="n">..</span><span class="o">$</span><span class="w"> </span><span class="n">esd.version</span><span class="o">:</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"esd_0.2-1"</span><span class="w">
</span><span class="n">..</span><span class="w"> </span><span class="n">..</span><span class="o">$</span><span class="w"> </span><span class="n">platform</span><span class="w">
</span><span class="o">:</span><span class="w"> </span><span class="n">chr</span><span class="w"> </span><span class="s2">"x86_64-pc-linux-gnu (64-bit)"</span><span class="w">
</span><span class="n">Index</span><span class="o">:</span><span class="w">
</span><span class="n">Date</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">41611</span><span class="p">],</span><span class="w"> </span><span class="n">format</span><span class="o">:</span><span class="w"> </span><span class="s2">"1900-01-01"</span><span class="w"> </span><span class="s2">"1900-01-02"</span><span class="w"> </span><span class="s2">"1900-01-03"</span><span class="w"> </span><span class="s2">"1900-01-04"</span><span class="w"> </span><span class="n">...</span><span class="w">
</span></code></pre></div></div> <h2 id="example-24-on-how-to-load-some-data-sets-and-display-the-summary-of-statistics"> <a href="#example-24-on-how-to-load-some-data-sets-and-display-the-summary-of-statistics" class="anchor-heading" aria-labelledby="example-24-on-how-to-load-some-data-sets-and-display-the-summary-of-statistics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2.4 on how to load some data sets and display the summary of statistics </h2> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Load data for Ferder</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">(</span><span class="n">ferder</span><span class="p">)</span><span class="w">
</span><span class="c1">## Display the summary of statistics</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">summary</span><span class="p">(</span><span class="n">ferder</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <h2 id="example-25-on-how-to-load-a-weather-station-object-and-display-the-location-on-a-map"> <a href="#example-25-on-how-to-load-a-weather-station-object-and-display-the-location-on-a-map" class="anchor-heading" aria-labelledby="example-25-on-how-to-load-a-weather-station-object-and-display-the-location-on-a-map"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2.5 on how to load a weather station object and display the location on a map </h2> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load bjornholt data set</span><span class="w">
</span><span class="n">data</span><span class="p">(</span><span class="n">bjornholt</span><span class="p">)</span><span class="w">
</span><span class="c1"># plot the time series</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">bjornholt</span><span class="p">)</span><span class="w">
</span><span class="c1"># map the location</span><span class="w">
</span><span class="n">map</span><span class="p">(</span><span class="n">bjornholt</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>Figure 4: Example of a station (a) and a map plot (b) for a single station ‘Bjornholt’.</p> <h2 id="example-26-on-how-to-read-a-field-object-and-plot-the-results"> <a href="#example-26-on-how-to-read-a-field-object-and-plot-the-results" class="anchor-heading" aria-labelledby="example-26-on-how-to-read-a-field-object-and-plot-the-results"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2.6 on how to read a field object and plot the results </h2> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Get NCEP 2m air temperature for the selected spatial window defined by lon and lat</span><span class="w">
</span><span class="n">t2m</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">t2m.NCEP</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">-30</span><span class="p">,</span><span class="m">30</span><span class="p">),</span><span class="n">lat</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">40</span><span class="p">,</span><span class="m">70</span><span class="p">))</span><span class="w">
</span><span class="c1"># Computes the EOFs</span><span class="w">
</span><span class="n">X</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">EOF</span><span class="p">(</span><span class="n">t2m</span><span class="p">)</span><span class="w">
</span><span class="c1"># Plot the result</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>Figure 5: An example of a plot results for an EOF object.</p> <h2 id="example-27-on-how-to-retrieve-wind-data-sets-and-visualise-the-results"> <a href="#example-27-on-how-to-retrieve-wind-data-sets-and-visualise-the-results" class="anchor-heading" aria-labelledby="example-27-on-how-to-retrieve-wind-data-sets-and-visualise-the-results"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2.7 on how to retrieve wind data sets and visualise the results </h2> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load 10m zonal and meridional wind components</span><span class="w">
</span><span class="n">u10</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">retrieve</span><span class="p">(</span><span class="err">’</span><span class="n">data</span><span class="o">/</span><span class="n">ERAINT</span><span class="o">/</span><span class="n">eraint_elnino.nc</span><span class="err">’</span><span class="p">,</span><span class="n">param</span><span class="o">=</span><span class="err">’</span><span class="n">u10</span><span class="err">’</span><span class="p">)</span><span class="w">
</span><span class="n">v10</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">retrieve</span><span class="p">(</span><span class="err">’</span><span class="n">data</span><span class="o">/</span><span class="n">ERAINT</span><span class="o">/</span><span class="n">eraint_elnino.nc</span><span class="err">’</span><span class="p">,</span><span class="n">param</span><span class="o">=</span><span class="err">’</span><span class="n">v10</span><span class="err">’</span><span class="p">)</span><span class="w">
</span><span class="c1"># Map the data</span><span class="w">
</span><span class="n">map</span><span class="p">(</span><span class="n">u10</span><span class="p">,</span><span class="n">colorbar</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span><span class="c1"># Display the vectors</span><span class="w">
</span><span class="n">vec</span><span class="p">(</span><span class="n">u10</span><span class="p">,</span><span class="n">v10</span><span class="p">,</span><span class="n">new</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="m">2</span><span class="p">,</span><span class="n">length</span><span class="o">=</span><span class="m">0.05</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <h2 id="example-28-test"> <a href="#example-28-test" class="anchor-heading" aria-labelledby="example-28-test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2.8. test </h2> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get 2m temperature data for Oslo</span><span class="w">
</span><span class="c1"># (works within MET Norway firewall only)</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">station</span><span class="p">(</span><span class="n">stid</span><span class="o">=</span><span class="m">18700</span><span class="p">,</span><span class="n">param</span><span class="o">=</span><span class="err">’</span><span class="n">t2m</span><span class="err">’</span><span class="p">,</span><span class="n">src</span><span class="o">=</span><span class="err">’</span><span class="n">metnod</span><span class="err">’</span><span class="p">)</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">it</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1837</span><span class="p">,</span><span class="m">2014</span><span class="p">))</span><span class="w">
</span><span class="c1">## Or gets data from ECA&amp;D as</span><span class="w">
</span><span class="c1">## x &lt;- station(loc="Oslo Blindern",param=’t2m’,src=’ecad’)</span><span class="w">
</span><span class="c1">## x &lt;- subset(x,is=duplicated(loc(x))) # to remove duplicated stations</span><span class="w">
</span><span class="c1"># Cumulative average</span><span class="w">
</span><span class="n">cumugram</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span><span class="c1"># Seasonal wheel</span><span class="w">
</span><span class="n">wheel</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span><span class="c1"># seasonal variations of year-to-year variance</span><span class="w">
</span><span class="n">climvar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span><span class="c1"># daily seasonal cycle for all years</span><span class="w">
</span><span class="n">diagram</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>Figure 7: Examples of ‘cumugram’, ‘wheel’, ‘climvar’, and ‘diagram’ plots. The ‘cumugram’ shows how the mean value of some variable has evolved from the start of the year and compares this curve to previous years. The graphics produced by ‘wheel’, on the other hand, emphasises how the seasonal variations affect the variable, e.g. whether some extremes tend to be associated with a specific season. Panel c shows results produced by ‘climvar’ shows the year-to-year statistics for a variable, e.g. the standard deviation of the temperature on February 1st. The ‘diagram’ method can be used in different context, and for a ‘station’ object, it produces graphics that compare the day-to-day values with those of previous years.</p> <h2 id="example-29-on-how-to-process-the-data-and-visualise-the-trend-of-the-time-series"> <a href="#example-29-on-how-to-process-the-data-and-visualise-the-trend-of-the-time-series" class="anchor-heading" aria-labelledby="example-29-on-how-to-process-the-data-and-visualise-the-trend-of-the-time-series"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2.9 on how to process the data and visualise the trend of the time series </h2> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get 2m temperature data for Ferder and calculate annual mean</span><span class="w">
</span><span class="n">data</span><span class="p">(</span><span class="n">ferder</span><span class="p">)</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">annual</span><span class="p">(</span><span class="n">ferder</span><span class="p">)</span><span class="w">
</span><span class="c1"># Plot the time series and add a trend line</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">ylim</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="m">11</span><span class="p">))</span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">trend</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="n">col</span><span class="o">=</span><span class="s2">"red"</span><span class="p">,</span><span class="n">lwd</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="c1"># Visualise trends for various periods 40 years or longer (minlen)</span><span class="w">
</span><span class="c1"># and mark trends that are significant at the 1% level (pmax)</span><span class="w">
</span><span class="n">vis.trends</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">minlen</span><span class="o">=</span><span class="m">40</span><span class="p">,</span><span class="n">pmax</span><span class="o">=</span><span class="m">0.01</span><span class="p">)</span><span class="w">
</span><span class="n">t2m</span><span class="w"> </span><span class="n">trend</span><span class="w"> </span><span class="p">(</span><span class="n">deg</span><span class="w"> </span><span class="n">C</span><span class="o">/</span><span class="n">decade</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>Figure 8: Visualising the trend in the temperature time series from Ferder for the full period (left panel) and simultaneously for different periods of various length (right panel). The trend analysis indicates a significant increase in temperature at Ferder since the 1900s, but also shows that the strength and significance of the trend is sensitive to the period considered because the increase is not monotone.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
